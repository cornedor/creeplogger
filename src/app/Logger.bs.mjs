'use client';
// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Games from "../helpers/Games.bs.mjs";
import * as React from "react";
import * as Players from "../helpers/Players.bs.mjs";
import * as UserGrid from "../components/UserGrid.bs.mjs";
import * as ScoreStep from "../components/ScoreStep.bs.mjs";
import * as Belt_MapString from "@rescript/runtime/lib/es6/Belt_MapString.js";
import * as Fonts from "../helpers/fonts";
import * as ConfirmationStep from "../components/ConfirmationStep.bs.mjs";
import * as DartsGameModeStep from "../components/DartsGameModeStep.bs.mjs";
import * as JsxRuntime from "react/jsx-runtime";

function Logger(props) {
  let livePlayers = Players.useAllPlayers(undefined, undefined);
  let match = livePlayers.length;
  let players = match !== 0 ? livePlayers : props.players;
  let match$1 = React.useState(() => {});
  let setSelectedUsers = match$1[1];
  let selectedUsers = match$1[0];
  let match$2 = React.useState(() => "UserSelection");
  let setStep = match$2[1];
  let match$3 = React.useState(() => -1);
  let setRedState = match$3[1];
  let redState = match$3[0];
  let match$4 = React.useState(() => -1);
  let setBlueState = match$4[1];
  let blueState = match$4[0];
  let match$5 = React.useState(() => 0);
  let setEarnedPoints = match$5[1];
  let match$6 = React.useState(() => ({}));
  let match$7 = React.useState(() => "Foosball");
  let gameMode = match$7[0];
  let reset = () => {
    setStep(param => "UserSelection");
    setSelectedUsers(param => {});
    setBlueState(param => -1);
    setRedState(param => -1);
    setEarnedPoints(param => 0);
  };
  Games.getTimePeriod("Daily");
  let winnerTeam = redState > blueState ? "Red" : "Blue";
  let winners = Belt_MapString.keysToArray(Belt_MapString.keep(selectedUsers, (param, value) => value === winnerTeam));
  let stepComponent;
  switch (match$2[0]) {
    case "UserSelection" :
      stepComponent = JsxRuntime.jsx(UserGrid.make, {
        selectedUsers: selectedUsers,
        setSelectedUsers: setSelectedUsers,
        reset: reset,
        setStep: setStep,
        players: players,
        gameMode: gameMode,
        setGameMode: match$7[1]
      });
      break;
    case "ScoreForm" :
      stepComponent = gameMode === "Foosball" ? JsxRuntime.jsx(ScoreStep.make, {
          selectedUsers: selectedUsers,
          setStep: setStep,
          reset: reset,
          blueState: blueState,
          setBlueState: setBlueState,
          redState: redState,
          setRedState: setRedState,
          setEarnedPoints: setEarnedPoints,
          setPerPlayerDeltas: match$6[1],
          players: players,
          gameMode: gameMode
        }) : JsxRuntime.jsx(DartsGameModeStep.make, {
          selectedUsers: selectedUsers,
          setStep: setStep,
          reset: reset,
          setEarnedPoints: setEarnedPoints,
          players: players,
          gameMode: gameMode
        });
      break;
    case "Confirmation" :
      stepComponent = JsxRuntime.jsx(ConfirmationStep.make, {
        score: match$5[0],
        winners: winners,
        reset: reset,
        players: players,
        perPlayerDeltas: match$6[0]
      });
      break;
  }
  return JsxRuntime.jsx("div", {
    children: stepComponent,
    className: "bg-blobs bg-darkbg bg-no-repeat bg-left text-white flex flex-col min-h-screen w-full"
  });
}

let make = Logger;

export {
  make,
}
/*  Not a pure module */
